{#
  Navigation — Centered Logo Layout
  Data is driven by src/_data/navigation.js (single source of truth).

  Set these variables before including:
  - navTheme:      "dark" or "light" (default: "light")
  - navId:         optional element ID
  - navBg:         background classes (default: "bg-white")
  - navExtraClasses: additional classes (default: "")
  - isHomepage:    true/false — switches links to anchor hrefs (default: false)
#}

{% set textColor   = "text-white"         if navTheme == "dark" else "text-gray-900" %}
{% set textHover   = "hover:text-white/80" if navTheme == "dark" else "hover:text-gray-500" %}
{% set textExtra   = "text-shadow"         if navTheme == "dark" else "" %}
{% set mobileBg    = "bg-black/95"         if navTheme == "dark" else "bg-white/95" %}
{% set mobileBorder = ""                   if navTheme == "dark" else "border-t border-gray-100" %}
{% set dropdownBg  = "bg-black/90 backdrop-blur-md" if navTheme == "dark" else "bg-white shadow-lg" %}
{% set dropdownText = "text-white hover:text-white/80" if navTheme == "dark" else "text-gray-700 hover:text-gray-900" %}

{# Helper macro: resolve the correct href for an item #}
{% macro itemHref(item) %}{{ item.anchorHref if isHomepage and item.anchorHref else item.href }}{% endmacro %}

<nav {% if navId %}id="{{ navId }}"{% endif %} class="fixed top-0 w-full {{ navBg or 'bg-white' }} z-50 py-6 {{ navExtraClasses or '' }}">
    <div class="w-full max-w-screen-lg mx-auto px-6 flex justify-between items-center">

        <!-- Hamburger Button (Mobile) -->
        <button class="mobile-menu-btn lg:hidden {{ textColor }} {{ textHover }} transition-colors">
            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <!-- Left Menu (Desktop) -->
        <ul class="hidden lg:flex font-sans flex-1 justify-evenly items-center">
            <li class="min-w-[30px]">&nbsp;</li>
            {% for item in navigation.left %}
            <li class="min-w-[90px] text-center{% if item.children %} relative group{% endif %}">
                <a href="{{ itemHref(item) }}" class="inline-flex items-center gap-1 {{ textColor }} {{ textHover }} transition-colors text-sm tracking-widest uppercase {{ textExtra }}">
                    {{ item.label }}
                    {% if item.children %}
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                    {% endif %}
                </a>
                {% if item.children %}
                <ul class="absolute left-1/2 -translate-x-1/2 top-full pt-2 hidden group-hover:block min-w-[160px]">
                    {% for child in item.children %}
                    <li class="{{ dropdownBg }} rounded">
                        <a href="{{ child.href }}" class="{{ dropdownText }} block px-5 py-3 text-xs tracking-widest uppercase transition-colors">
                            {{ child.label }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>

        <!-- Center Logo -->
        <a href="{{ itemHref(navigation.left[0]) }}" class="flex-shrink-0 mx-8 lg:mx-12">
            <img src="/assets/logo_256.png" alt="Saramonse Beauty" class="w-16 h-16 lg:w-20 lg:h-20">
        </a>

        <!-- Right Menu (Desktop) -->
        <div class="hidden lg:flex flex-1 items-center">
            <ul class="flex font-sans flex-1 justify-evenly items-center">
                {% for item in navigation.right %}
                <li class="min-w-[90px] text-center{% if item.children %} relative group{% endif %}">
                    <a href="{{ itemHref(item) }}" class="inline-flex items-center gap-1 {{ textColor }} {{ textHover }} transition-colors text-sm tracking-widest uppercase {{ textExtra }}">
                        {{ item.label }}
                        {% if item.children %}
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                        {% endif %}
                    </a>
                    {% if item.children %}
                    <ul class="absolute left-1/2 -translate-x-1/2 top-full pt-2 hidden group-hover:block min-w-[160px]">
                        {% for child in item.children %}
                        <li class="{{ dropdownBg }} rounded">
                            <a href="{{ child.href }}" class="{{ dropdownText }} block px-5 py-3 text-xs tracking-widest uppercase transition-colors">
                                {{ child.label }}
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
            <div class="flex gap-6 w-auto shrink-0">
                {% for icon in navigation.icons %}
                <a href="{{ icon.href }}" class="{{ textColor }} {{ textHover }} transition-colors {{ textExtra }}">
                    {% if icon.icon == "account" %}
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    {% elif icon.icon == "cart" %}
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                    </svg>
                    {% endif %}
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Cart Icon (Mobile) -->
        <a href="#cart" class="lg:hidden {{ textColor }} {{ textHover }} transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
        </a>
    </div>
</nav>

<!-- Mobile Menu -->
<div id="mobile-menu" class="fixed top-20 w-full hidden lg:hidden {{ mobileBg }} backdrop-blur-md z-40 {{ mobileBorder }}">
    <ul class="flex flex-col items-center gap-6 py-8 font-sans">
        {% for item in navigation.left %}
        <li>
            <a href="{{ itemHref(item) }}" class="{{ textColor }} {{ textHover }} transition-colors text-sm tracking-widest uppercase">
                {{ item.label }}
            </a>
        </li>
        {% if item.children %}
        {% for child in item.children %}
        <li>
            <a href="{{ child.href }}" class="{{ textColor }} {{ textHover }} transition-colors text-xs tracking-widest uppercase opacity-70">
                &mdash; {{ child.label }}
            </a>
        </li>
        {% endfor %}
        {% endif %}
        {% endfor %}
        {% for item in navigation.right %}
        <li>
            <a href="{{ itemHref(item) }}" class="{{ textColor }} {{ textHover }} transition-colors text-sm tracking-widest uppercase">
                {{ item.label }}
            </a>
        </li>
        {% endfor %}
        {% for icon in navigation.icons %}
        {% if icon.icon != "cart" %}
        <li>
            <a href="{{ icon.href }}" class="{{ textColor }} {{ textHover }} transition-colors text-sm tracking-widest uppercase">
                {{ icon.label }}
            </a>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>
