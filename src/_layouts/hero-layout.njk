<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ description or 'Saramonse Beauty - Premium beauty therapy services' }}">
    <title>{{ title or 'Saramonse Beauty | Premium Beauty Therapy' }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600&family=Cormorant+Garamond:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
</head>
<body class="font-serif text-gray-800">
    <!-- Hero Nav (Centered Logo, Dark/Transparent) -->
    {% set navTheme = "dark" %}
    {% set navId = "nav-hero" %}
    {% set navBg = "bg-transparent" %}
    {% set navExtraClasses = "transition-all duration-500 ease-in-out opacity-100 translate-y-0" %}
    {% set isHomepage = true %}
    {% include "navigation.njk" %}

    <!-- Compact Nav (Logo Left, Dark) - Homepage only, shown on scroll -->
    {% include "compact-nav.njk" %}

    {{ content | safe }}

    {% include "footer.njk" %}

    <script>
        const mobileMenuBtns = document.querySelectorAll('.mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const navHero = document.getElementById('nav-hero');
        const navCompact = document.getElementById('nav-compact');
        const heroSection = document.getElementById('home');

        // Circle burst mobile menu
        function openMenu(btn) {
            const rect = btn.getBoundingClientRect();
            mobileMenu.style.setProperty('--ox', (rect.left + rect.width / 2) + 'px');
            mobileMenu.style.setProperty('--oy', (rect.top + rect.height / 2) + 'px');
            mobileMenu.classList.remove('menu-closing');
            mobileMenu.classList.add('menu-open');
            mobileMenuBtns.forEach(b => b.classList.add('menu-open'));
            document.documentElement.style.overflow = 'hidden';
        }

        function closeMenu() {
            mobileMenu.classList.remove('menu-open');
            mobileMenu.classList.add('menu-closing');
            mobileMenu.addEventListener('animationend', () => {
                mobileMenu.classList.remove('menu-closing');
            }, { once: true });
            mobileMenuBtns.forEach(b => b.classList.remove('menu-open'));
            document.documentElement.style.overflow = '';
        }

        mobileMenuBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (mobileMenu.classList.contains('menu-open')) {
                    closeMenu();
                } else {
                    openMenu(btn);
                }
            });
        });

        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', closeMenu);
        });

        // Switch between nav layouts on scroll with slide-up animation
        window.addEventListener('scroll', () => {
            const heroHeight = heroSection.offsetHeight;
            const scrollY = window.scrollY;
            const shouldBeCompact = scrollY > heroHeight - 100;

            if (shouldBeCompact) {
                navHero.classList.remove('opacity-100', 'translate-y-0');
                navHero.classList.add('opacity-0', '-translate-y-full', 'pointer-events-none');

                navCompact.classList.remove('opacity-0', '-translate-y-full', 'pointer-events-none');
                navCompact.classList.add('opacity-100', 'translate-y-0');
            } else {
                navCompact.classList.remove('opacity-100', 'translate-y-0');
                navCompact.classList.add('opacity-0', '-translate-y-full', 'pointer-events-none');

                navHero.classList.remove('opacity-0', '-translate-y-full', 'pointer-events-none');
                navHero.classList.add('opacity-100', 'translate-y-0');
            }
        });
    </script>
</body>
</html>
